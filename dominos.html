<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domino Physics Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000000;
        }
        canvas {
            display: block;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
</head>
<body>
    <script>
        const { Engine, Render, Runner, World, Bodies, Mouse, MouseConstraint } = Matter;
        
        const engine = Engine.create();
        const world = engine.world;
        const width = window.innerWidth;
        const height = window.innerHeight;
        
        const render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width,
                height,
                wireframes: false,
                background: '#000000'
            }
        });
        
        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);

        const numDominos = 1; // Nombre de dominos à placer
        const spacing = (width - 400) / numDominos; // Espace ajusté entre eux

        function getRandomColor() {
            const colors = ['#FF5733', '#33FF57', '#3357FF', '#F4A460', '#8A2BE2', '#FFD700', '#00CED1'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function placeDomino(x, y) {
            let domino = Bodies.rectangle(x, y, 20, 100, {
                restitution: 0,
                isStatic: false,
                render: {
                    fillStyle: getRandomColor()
                }
            });
            World.add(world, domino);
        }

        for (let i = 0; i < numDominos; i++) {
            placeDomino(200 + i * spacing, 200);
        }
        
        // Ajouter un sol
        const ground = Bodies.rectangle(width / 2, height - 50, width, 20, {
            isStatic: true,
            render: { fillStyle: '#444' }
        });
        World.add(world, ground);
        
        let marble;
        let isDragging = false;
        
        window.addEventListener('mousedown', (event) => {
            if (!marble) {
                marble = Bodies.circle(event.clientX, event.clientY, 25, {
                    restitution: 0.8,
                    render: { fillStyle: '#ff0000' }
                });
                World.add(world, marble);
            }
            isDragging = true;
        });
        
        window.addEventListener('mousemove', (event) => {
            if (isDragging && marble) {
                Matter.Body.setPosition(marble, { x: event.clientX, y: event.clientY });
            }
        });
        
        window.addEventListener('mouseup', (event) => {
            if (marble) {
                let forceX = (event.clientX - marble.position.x) * -0.02;
                let forceY = (event.clientY - marble.position.y) * -0.02;
                Matter.Body.applyForce(marble, marble.position, { x: forceX, y: forceY });
            }
            isDragging = false;
        });
        
        const mouse = Mouse.create(render.canvas);
        const mouseConstraint = MouseConstraint.create(engine, {
            mouse: mouse,
            constraint: { stiffness: 0.2 }
        });
        World.add(world, mouseConstraint);
    </script>
</body>
</html>